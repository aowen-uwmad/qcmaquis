#!/bin/bash -l
STATE="void"
STATE_AMBIENT="void"
STATE_DMRG="configure"
# end of target states #
SHARED_FS=true
PREFIX=ambient
COMPILER=intel
COMPILER_VERSION=2013
MPI_WRAPPER=mvapich2
MPI_WRAPPER_VERSION=1.8.1-intel-wocuda
BOOST=boost
BOOST_VERSION=1.49.0
CMAKE=cmake

export CXX=mpicxx
export CC=mpicc
export BOOST_ROOT=/project/h07/boost_1_49_0/
export MV2_ENABLE_AFFINITY=0

module load gcc/4.7.2
module load ${COMPILER}/${COMPILER_VERSION}
module load ${MPI_WRAPPER}/${MPI_WRAPPER_VERSION}
module load ${CMAKE}
## common ##
MAQUIS_COMMON_CMAKE_CXX_FLAGS="-Wfatal-errors -w -O3 -DAMBIENT_CILK -DNDEBUG -std=c++11 -L/apps/castor/plasma-2.4.6/lib"
MAQUIS_COMMON_CMAKE_CXX_FLAGS_RELEASE="-Wfatal-errors -w -O3 -DAMBIENT_CILK -DNDEBUG -std=c++11 -L/apps/castor/plasma-2.4.6/lib"
MAQUIS_COMMON_CMAKE_C_COMPILER=mpicc
MAQUIS_COMMON_CMAKE_CXX_COMPILER=mpicxx
MAQUIS_COMMON_MPI_CXX_FOUND=FALSE
## ambient ##
MAQUIS_AMBIENT_ENABLE_REGRESSION_FUNCTIONAL=ON
MAQUIS_AMBIENT_ENABLE_REGRESSION_PERFORMANCE=ON
MAQUIS_AMBIENT_BOOST_BINDINGS_INCLUDE=/project/h07/ALPS_INTEL12_CASTOR2/include
MAQUIS_AMBIENT_SCALAPACK_LIBRARY="-lmkl_scalapack_lp64 -lmkl_blacs_openmpi_lp64"
MAQUIS_AMBIENT_PLASMA_LIBRARY="-lplasma -lcoreblas -lcblas -llapacke -lquark"
## dmrg ##
MAQUIS_DMRG_CMAKE_CXX_FLAGS="-w"
MAQUIS_DMRG_DEFAULT_BLAS_LAPACK=manual
MAQUIS_DMRG_BLAS_LAPACK_MANUAL_LIBS="-lmkl_intel_lp64 -lmkl_sequential -lmkl_core -lmkl_lapack95_lp64 -lpthread $MAQUIS_AMBIENT_PLASMA_LIBRARY"
MAQUIS_DMRG_BLAS_LAPACK_MANUAL_LIBS_DIR=/apps/castor/intel/mkl/lib/intel64
MAQUIS_DMRG_BLAS_LAPACK_MANUAL_INCLUDES=/apps/castor/intel/mkl/include
MAQUIS_DMRG_ALPS_ROOT_DIR=/project/h07/ALPS_INTEL12_CASTOR2
MAQUIS_DMRG_BUILD_REGRESSION=OFF 
MAQUIS_DMRG_BUILD_AMBIENT=ON
MAQUIS_DMRG_USE_AMBIENT=ON

source $ROOT_DIR/scripts/common/common.sh 
execute $*
